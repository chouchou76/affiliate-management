<div class="sort-panel">
  <!-- HEADER -->
  <div class="header">
    <h3>Sắp xếp theo trường</h3>
    <span class="help-icon">?</span>
  </div>

  <!-- CURRENT SORT RULE (nếu có) -->
  <div class="current-rule" *ngIf="sort; else noSort">
    <div class="rule-tag">
      <span class="field-label">
        {{ getFieldLabel(sort.field) }}
      </span>

      <div class="direction-buttons">
        <button
          class="dir-btn"
          [class.active]="sort.direction === 'asc'"
          (click)="onDirectionChange('asc')"
        >
          {{ getDirectionLabel('asc') }}
        </button>
        <button
          class="dir-btn"
          [class.active]="sort.direction === 'desc'"
          (click)="onDirectionChange('desc')"
        >
          {{ getDirectionLabel('desc') }}
        </button>
      </div>

      <button class="remove-rule" (click)="clear()" title="Xóa sắp xếp">
        ×
      </button>
    </div>
  </div>

  <!-- NO SORT YET -->
  <ng-template #noSort>
    <div class="no-sort-placeholder">
      <p>Chưa có quy tắc sắp xếp</p>
    </div>
  </ng-template>

  <!-- ADD / CHANGE FIELD -->
  <div class="add-field">
    <select
      [ngModel]="sort?.field || ''"
      (ngModelChange)="onFieldChange($event)"
      placeholder="Chọn trường"
    >
      <option value="" disabled [selected]="!sort">
        Chọn trường
      </option>
      <option
        *ngFor="let f of sortableFields"
        [value]="f.field"
      >
        {{ f.label }}
      </option>
    </select>
  </div>


</div>